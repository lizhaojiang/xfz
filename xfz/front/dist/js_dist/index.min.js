function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},500);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n,e.animate()})})},Banner.prototype.run=function(){console.log("sss"),this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab").children().click(function(){var r=$(this),o=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:o,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),a.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic3RvcCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwiY29uc29sZSIsImxvZyIsImxpc3RlbkxvYWRNb3JlRXZlbnQiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwibmV3c2VzIiwidHBsIiwidGVtcGxhdGUiLCJsaXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50IiwibGkiLCJhdHRyIiwibmV3c0xpc3RHcm91cCIsImVtcHR5Il0sIm1hcHBpbmdzIjoiQUFzQkEsU0FBU0EsU0FDTEMsS0FBS0MsWUFBYyxJQUNuQkQsS0FBS0UsWUFBY0MsRUFBRSxpQkFDckJILEtBQUtJLE1BQVEsRUFDYkosS0FBS0ssVUFBWUYsRUFBRSxlQUNuQkgs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bkJBLEVBQWEsS0FBVSxDQUN0QixJQUFJQyxFQUFTRCxFQUFhLEtBQ3RCRSxFQUFNQyxTQUFTLFlBQVksQ0FBQ0YsT0FBU0EsSUFFckNNLEVBQWdCbEUsRUFBRSxxQkFDdEJrRSxFQUFjQyxRQUNkRCxFQUFjN0MsT0FBT3dDLEdBQ3JCbEQsRUFBS0MsS0FBTyxFQUNaRCxFQUFLRSxZQUFjQSxFQUNuQm1ELEVBQUduQyxTQUFTLFVBQVVPLFdBQVdDLFlBQVksVUFDN0MxQixFQUFLRyxRQUFRa0IsY0FPakN0QixNQUFNSyxVQUFVa0MsSUFBTSxXQUNQcEQsS0FDTnVELHNCQURNdkQsS0FFTmtFLDZCQUdUL0QsRUFBRSxZQUNlLElBQUlKLFFBQ1ZxRCxPQUVLLElBQUl2QyxPQUNWdUMiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8g6Z2i5ZCR5a+56LGhXHJcbi8vIDEuIOa3u+WKoOWxnuaAp1xyXG4vLyDpgJrov4d0aGlz5YWz6ZSu5a2X77yM57uR5a6a5bGe5oCn77yM5bm25LiU5oyH5a6a5LuW55qE5YC844CCXHJcbi8vIOWOn+Wei+mTvlxyXG4vLyAyLiDmt7vliqDmlrnms5VcclxuLy8g5ZyoQmFubmVyLnByb3RvdHlwZeS4iue7keWumuaWueazleWwseWPr+S7peS6huOAglxyXG5cclxuLy8gZnVuY3Rpb24gQmFubmVyKCkge1xyXG4vLyAgICAgLy8g6L+Z5Liq6YeM6Z2i5YaZ55qE5Luj56CBXHJcbi8vICAgICAvLyDnm7jlvZPkuo7mmK9QeXRob27kuK3nmoRfX2luaXRfX+aWueazleeahOS7o+eggVxyXG4vLyAgICAgY29uc29sZS5sb2coJ+aehOmAoOWHveaVsCcpO1xyXG4vLyAgICAgdGhpcy5wZXJzb24gPSAnemhpbGlhbyc7XHJcbi8vIH1cclxuLy9cclxuLy8gQmFubmVyLnByb3RvdHlwZS5ncmVldCA9IGZ1bmN0aW9uICh3b3JkKSB7XHJcbi8vICAgICBjb25zb2xlLmxvZygnaGVsbG8gJyx3b3JkKTtcclxuLy8gfTtcclxuLy9cclxuLy8gdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuLy8gY29uc29sZS5sb2coYmFubmVyLnBlcnNvbik7XHJcbi8vIGJhbm5lci5ncmVldCgnemhpbGlhbycpO1xyXG5cclxuZnVuY3Rpb24gQmFubmVyKCkge1xyXG4gICAgdGhpcy5iYW5uZXJXaWR0aCA9IDc5ODtcclxuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcclxuICAgIHRoaXMuaW5kZXggPSAxO1xyXG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKFwiLmxlZnQtYXJyb3dcIik7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpO1xyXG4gICAgdGhpcy5iYW5uZXJVbCA9ICQoXCIjYmFubmVyLXVsXCIpO1xyXG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVsLmNoaWxkcmVuKFwibGlcIik7XHJcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xyXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpO1xyXG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50LTEpLmNsb25lKCk7XHJcbiAgICBzZWxmLmJhbm5lclVsLmFwcGVuZChmaXJzdEJhbm5lcik7XHJcbiAgICBzZWxmLmJhbm5lclVsLnByZXBlbmQobGFzdEJhbm5lcik7XHJcbiAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJ3aWR0aFwiOnNlbGYuYmFubmVyV2lkdGgqKHNlbGYuYmFubmVyQ291bnQrMiksJ2xlZnQnOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGZvcih2YXIgaT0wOyBpPHNlbGYuYmFubmVyQ291bnQ7IGkrKyl7XHJcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XHJcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcclxuICAgICAgICBpZihpID09PSAwKXtcclxuICAgICAgICAgICAgY2lyY2xlLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY3NzKHtcIndpZHRoXCI6c2VsZi5iYW5uZXJDb3VudCoxMis4KjIrMTYqKHNlbGYuYmFubmVyQ291bnQtMSl9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBpZihpc1Nob3cpe1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LnNob3coKTtcclxuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuc2hvdygpO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuaGlkZSgpO1xyXG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5oaWRlKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmJhbm5lclVsLnN0b3AoKS5hbmltYXRlKHtcImxlZnRcIjotNzk4KnNlbGYuaW5kZXh9LDUwMCk7XHJcbiAgICB2YXIgaW5kZXggPSBzZWxmLmluZGV4O1xyXG4gICAgaWYoaW5kZXggPT09IDApe1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJDb3VudC0xO1xyXG4gICAgfWVsc2UgaWYoaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgaW5kZXggPSAwO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgaW5kZXggPSBzZWxmLmluZGV4IC0gMTtcclxuICAgIH1cclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oJ2xpJykuZXEoaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5sb29wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihzZWxmLmluZGV4ID49IHNlbGYuYmFubmVyQ291bnQrMSl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0sMjAwMCk7XHJcbn07XHJcblxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5BcnJvd0NsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXggPT09IDApe1xyXG4gICAgICAgICAgICAvLyA9Pe+8mjEgPT0gJzEn77yadHJ1ZVxyXG4gICAgICAgICAgICAvLyA9PT09IDEgIT0gJzEnXHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJDb3VudCpzZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBzZWxmLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKXtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvdmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy5iYW5uZXJHcm91cC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g56ys5LiA5Liq5Ye95pWw5piv77yM5oqK6byg5qCH56e75Yqo5YiwYmFubmVy5LiK5Lya5omn6KGM55qE5Ye95pWwXHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KHRydWUpO1xyXG4gICAgfSxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g56ys5LqM5Liq5Ye95pWw5piv77yM5oqK6byg5qCH5LuOYmFubmVy5LiK56e76LWw5Lya5omn6KGM55qE5Ye95pWwXHJcbiAgICAgICAgc2VsZi5sb29wKCk7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsb2JqKSB7XHJcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJzc3NcIik7XHJcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcclxuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG59O1xyXG5cclxuXHJcbmZ1bmN0aW9uIEluZGV4KCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5wYWdlID0gMjtcclxuICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSAwO1xyXG4gICAgc2VsZi5sb2FkQnRuID0gJChcIiNsb2FkLW1vcmUtYnRuXCIpO1xyXG4gICAgLy8gdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbihkYXRlVmFsdWUpe1xyXG4gICAgLy8gICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZVZhbHVlKTtcclxuICAgIC8vICAgICB2YXIgZGF0ZXRzID0gZGF0ZS5nZXRUaW1lKCk7XHJcbiAgICAvLyAgICAgdmFyIG5vd3RzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcclxuICAgIC8vICAgICB2YXIgdGltZXN0YW1wID0gKG5vd3RzIC0gZGF0ZXRzKS8xMDAwO1xyXG4gICAgLy8gICAgIGlmICh0aW1lc3RhbXAgPCA2MCl7XHJcbiAgICAvLyAgICAgICAgIHJldHVybiAn5Yia5YiaJztcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgICAgZWxzZSBpZiAodGltZXN0YW1wID49IDYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKXtcclxuICAgIC8vICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRpbWVzdGFtcC82MCk7XHJcbiAgICAvLyAgICAgICAgIHJldHVybiBtaW51dGVzKyfliIbpkp/liY0nO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vICAgICBlbHNlIGlmKHRpbWVzdGFtcCA+PSA2MCo2MCAmJiB0aW1lc3RhbXAgPCA2MCo2MCoyNCl7XHJcbiAgICAvLyAgICAgICAgIGhvdXJzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwLzYwKTtcclxuICAgIC8vICAgICAgICAgcmV0dXJuIGhvdXJzKyflsI/ml7bliY0nO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vICAgICBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAqNjAqMjQgJiYgdGltZXN0YW1wIDwgNjAqNjAqMjQqMzApe1xyXG4gICAgLy8gICAgICAgICBkYXlzID0gcGFyc2VJbnQodGltZXN0YW1wLzYwLzYwLzI0KTtcclxuICAgIC8vICAgICAgICAgcmV0dXJuIGRheXMrJ+WkqeWJjSc7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIGVsc2V7XHJcbiAgICAvLyAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgLy8gICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICAvLyAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERhdGUoKTtcclxuICAgIC8vICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAvLyAgICAgICAgIHZhciBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgIC8vICAgICAgICAgcmV0dXJuIHllYXIrJy8nK21vbnRoKycvJytkYXkrXCIgXCIraG91cisnOicrbWludXRlO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH1cclxufVxyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgbG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcclxuICAgIGxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAncCc6IHNlbGYucGFnZSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IHNlbGYuY2F0ZWdvcnlfaWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHRbJ2RhdGEnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5ld3Nlcy5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwibmV3cy1pdGVtXCIse1wibmV3c2VzXCI6bmV3c2VzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkQnRuLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdGFiR3JvdXAgPSAkKFwiLmxpc3QtdGFiXCIpO1xyXG4gICAgdGFiR3JvdXAuY2hpbGRyZW4oKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gdGhpc++8muS7o+ihqOW9k+WJjemAieS4reeahOi/meS4qmxp5qCH562+XHJcbiAgICAgICAgdmFyIGxpID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnlfaWQgPSBsaS5hdHRyKFwiZGF0YS1jYXRlZ29yeVwiKTtcclxuICAgICAgICB2YXIgcGFnZSA9IDE7XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBjYXRlZ29yeV9pZCxcclxuICAgICAgICAgICAgICAgICdwJzogcGFnZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIix7XCJuZXdzZXNcIjpuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlbXB0ee+8muWPr+S7peWwhui/meS4quagh+etvuS4i+eahOaJgOacieWtkOWFg+e0oOmDveWIoOaOiVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzTGlzdEdyb3VwID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xyXG4gICAgYmFubmVyLnJ1bigpO1xyXG5cclxuICAgIHZhciBpbmRleCA9IG5ldyBJbmRleCgpO1xyXG4gICAgaW5kZXgucnVuKCk7XHJcbn0pOyJdfQ==
